bundle:
  name: deltarecon

workspace:
  root_path: /Workspace/Users/${workspace.current_user.userName}/.bundle/${bundle.name}/${bundle.target}

# Simple sync - no wheel building, just sync the Python package and notebooks
sync:
  include:
    - "deltarecon/**/*.py"    # Sync the Python package (includes config)
    - "notebooks/**/*.py"     # Sync notebooks
    - "*.md"                  # Sync documentation
  exclude:
    - "__pycache__/**"
    - "*.pyc"
    - ".pytest_cache/**"
    - ".databricks/**"
    - "fix_imports.py"

variables:
  # User running the jobs
  job_run_as_user:
    description: "User email that jobs run as"
    default: "${workspace.current_user.userName}"

targets:
  dev:
    mode: development
    workspace:
      host: https://adb-984752964297111.11.azuredatabricks.net  # Update with your Azure workspace URL

  prod:
    mode: production
    workspace:
      host: https://adb-984752964297111.11.azuredatabricks.net  # Update with your Azure workspace URL
      root_path: /Workspace/Users/${workspace.current_user.userName}/.bundle/${bundle.name}/${bundle.target}
    permissions:
      - user_name: ${workspace.current_user.userName}
        level: CAN_MANAGE
      - user_name: ${var.job_run_as_user}
        level: CAN_MANAGE
